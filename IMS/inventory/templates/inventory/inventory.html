{% extends 'base.html' %}
{% block nav_inventory %}{%endblock%}
{% block main %}
    <div class ="pagetitle">
      <h1>Inventory</h1>
    </div><!-- End Page Title -->

    <section class="section">
      <!-- <div class="row">
        <div class="col-lg-12"> -->
          <form class="modal fade" id="verticalycentered" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Filter</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="filter">
                    <select name="orderby" class=" form-select">
                      <option disabled selected>Sort by</option>
                      <option value="name">Name</option>
                      <option value="purchasing_price">Purchasing Price</option>
                      <option value="selling_price">Selling Price</option>
                      <option value="on_hand">On Hand</option>
                      <option value="updated">Updated</option>
                    </select>
                  </div>
                    <select class="form-select" name="date">
                      <option disabled selected>Filter by Updated</option>
                      <option value="today">Today</option>
                      <option value="week">This Week</option>
                      <option value="month">This Month</option>
                      <option value="year">This Year</option>
                    </select>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Apply</button>
                </div>
              </div>
            </div>
          </form><!-- End Vertically centered Modal-->
      <form action="{% url 'make_sales' %}" method="post">
        
        {%csrf_token%}
    {% if employee.role == 'specialist'%}
    <div class="row m-2">
      <!-- Vertically centered Modal -->
      <div class="col">
        <button type="button" class="bi bi-sliders btn btn-primary" data-bs-toggle="modal" data-bs-target="#verticalycentered">
          Filter
        </button>
        <a  href="{% url 'addinventory' %}" class="bi bi-plus btn btn-primary">
          New Item
        </a>
        <button type="submit" class="btn btn-primary">Sales Order</button>

          </div>
    </div>
    {%endif%}
        <div class="card py-3 m-2">
            <div class="card-body">
              
              <!-- Table with stripped rows -->
              <table class="table datatable">
                <thead>
                  <tr>
                    <th>Select</th>
                    <th>Photo</th>
                    <th>
                      Name
                    </th>
                    <th>SKU</th>
                    <th>Dimensions</th>
                    <th>Purchasing Price</th>
                    <th>Selling Price</th>
                    <th>On-Hand</th>
                    <th>Units</th>
                    <th data-type="date" data-format="YYYY/DD/MM">Updated</th>
                  </tr>
                </thead>
                <tbody>
                  {% for i in inventory %}
                  <tr>
                    <td><input type="checkbox" name="item" id="" value="{{i.id}}" ></td>
                    <td><img src="{%if i.photo%} {{i.photo.url}} {%endif%}" alt="{{i.name}} image " width="50" height="50"></td>
                    <td><a class="bi bi-pen" href="{% url 'updateinventory' i.id %}">{{i.name}} </a></td>
                    <td>{{i.sku}}</td>
                    <td>{{i.dimensions}}</td>
                    <td>₹{{i.purchasing_price}}</td>
                    <td>₹{{i.selling_price}}</td>
                    <td><a href="{% url 'make_purchase' i.id%}" class="link btn  bi bi-plus-circle {%if i.on_hand < i.reorder_point%} text-danger{%else%}text-primary{%endif%}">
                      {{i.on_hand}} </a></form></td>
                    <td>{{i.units}}</td>
                    <td>{{i.updated}}</td>
                  </tr>
                  {% endfor %}
                    
                </tbody>
              </table>
              <!-- End Table with stripped rows -->
            </div>
          </div>
      </form>
          


        </div>
      </div>
    </section>

 {% endblock %}

 